<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <body>

        <ui:composition template="./../../../../template/ApsTemplate.xhtml">

            <ui:define name="content">
                <h:panelGrid columns="4">
                    <p:column colspan="3">
                        <p:panel id="addAircraft" header="Add New Aircraft" style="margin-bottom:20px">
                            <h:form>
                                <p:messages autoUpdate="true"/>
                                <p:panelGrid columns="3">
                                    <p:outputLabel value="Aircraft Model:" for="model"/>
                                    <p:selectOneMenu id="model" value="#{fleetController.aircraftModel}" converter="aircraftModelConverter" 
                                                     filter="true" filterMatchMode="contains" style="width:100%" required="true">
                                        <f:selectItem itemLabel="Select Aircraft Model" itemValue=""/>
                                        <f:selectItems value="#{fleetController.aircraftModels}" var="model" 
                                                       itemLabel="#{model.typeCode}" itemValue="#{model}"/>
                                    </p:selectOneMenu>
                                    <p:tooltip id="model_tooltip" for="model" value="Choose an aircraft model"/>

                                    <p:outputLabel value="Tail Number:" for="tail_no"/>
                                    <p:inputMask id="tail_no" binding="#{tailNo}" mask="9V-aaa" required="true"/>
                                    <p:tooltip id="tail_no_tooltip" for="tail_no" showEvent="focus" hideEvent="blur" 
                                               value="Register Number with prefix 9V-"/>

                                    <p:outputLabel value="Source:" for="source"/>
                                    <p:selectOneRadio id="source" binding="#{source}" required="true">
                                        <f:selectItem itemLabel="Rented" itemValue="Rented" />
                                        <f:selectItem itemLabel="Purchased" itemValue="Purchased" />
                                    </p:selectOneRadio>
                                    <p:tooltip id="source_tooltip" for="source" trackMouse="true" 
                                               value="Choose if the aircraft is rented or purchased"/>

                                    <p:outputLabel value="Lifespan (years):" for="lifespan"/>
                                    <p:inputMask id="lifespan" binding="#{lifespan}" mask="99" required="true"/>
                                    <p:tooltip id="lifespan_tooltip" for="lifespan" showEvent="focus" hideEvent="blur" 
                                               value="Expected lifespan of the aircraft"/>

                                    <p:outputLabel value="Cost (million):" for="cost"/>
                                    <p:inputText id="cost" binding="#{cost}" required="true"/>
                                    <p:tooltip id="cost_tooltip" for="cost" showEvent="focus" hideEvent="blur" 
                                               value="Cost of rental/purchase of aircraft"/>

                                    <c:forEach var="aircraftCabinClass" items="#{fleetController.aircraftCabinClassHelpers}" varStatus="status">
                                        <p:outputLabel value="#Seats for #{aircraftCabinClass.name} Class:"/>
                                        <p:spinner id="#{aircraftCabinClass.type}" value="#{aircraftCabinClass.seatQty}" stepFactor="1" min="0"/>
                                        <p:outputLabel/>
                                    </c:forEach>
                                    <p:commandButton value="Add" action="#{navigationController.toAddNewAircraft()}" actionListener="#{fleetController.addNewAircraft(tailNo.value, lifespan.value, source.value, cost.value, seatConfig.value)}"/>
                                </p:panelGrid>
                            </h:form>
                        </p:panel>
                    </p:column>
                    <p:column colspan="1">
                        <p:panel id="aircraftCabinClass" header="Cabin Class Configuration for Chosen Model" style="margin-bottom:20px"/>
                    </p:column>
                </h:panelGrid>

            </ui:define>

        </ui:composition>

    </body>
</html>
