<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns="http://www.w3.org/1999/xhtml"
                template="./../../../../../template/CrmExTemplate.xhtml"
                xmlns:pa="http://xmlns.jcp.org/jsf/composite/ezcomp/panel"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <ui:define name="title">
        Search Result
    </ui:define>

    <ui:define name="content">
        <h:form>
            <pa:CCFlightSearchPanel />

            <h2>#{bookingManager.deptAirport.city.cityName} > #{bookingManager.arrAirport.city.cityName}</h2>
            <p:tabMenu activeIndex="#{param.i}">
                <p:menuitem value="#{bookingManager.searchDeptDate}" icon="ui-icon-star">
                    <f:param name="i" value="0" />
                </p:menuitem>
                <p:menuitem value="Demos" outcome="#{crmExNavController.redirectToSearchFlightResult()}" icon="ui-icon-search">
                    <f:param name="i" value="1" />
                </p:menuitem>
                <p:menuitem value="Documentation" icon="ui-icon-document">
                    <f:param name="i" value="2" />
                </p:menuitem>
                <p:menuitem value="Support" icon="ui-icon-wrench">
                    <f:param name="i" value="3" />
                </p:menuitem>
                <p:menuitem value="Social" icon="ui-icon-person">
                    <f:param name="i" value="4" />
                </p:menuitem>
            </p:tabMenu>

            <p:panelGrid>
                <!--Header-->
                <p:row>
                    <p:column colspan="3" rowspan="2">
                        <p:outputLabel value="Sort by: " />
                        <p:commandButton value="Departure time" />
                        <p:commandButton value="Arrival time" />
                        <p:commandButton value="Duration" />
                    </p:column>
                    <c:forEach items="#{bookingManager.getFlightSchedLowesetTixFams()}" var="tixFam">
                        <p:column colspan="1">#{tixFam.cabinClass.name}</p:column>
                    </c:forEach>
                </p:row>
                <p:row>
                    <c:forEach items="#{bookingManager.getFlightSchedLowesetTixFams()}" var="tixFam">
                        <p:column colspan="1">#{tixFam.name}</p:column>
                    </c:forEach>
                </p:row>

                <p:row>
                    <p:column>Departure</p:column>
                    <p:column><p:outputLabel value="" /></p:column>
                    <p:column>Arrival</p:column>
                </p:row>
                <p:row>
                    <c:forEach items="#{bookingManager.getFlightSchedLowesetTixFams()}" var="tixFam">
                        <p:column colspan="1"><p:outputLabel value="" /></p:column>
                    </c:forEach>
                </p:row>

                <!--Flight Schedules-->
                <c:forEach items="#{bookingManager.directFlightScheds}" var="flightSched" >
                    <p:row>
                        <p:column>
                            <p:panelGrid>
                                <p:row>
                                    <p:column>
                                        <p:outputLabel value="#{flightSched.departDate}">
                                            <f:convertDateTime pattern="EE, dd MMM yyyy" />
                                        </p:outputLabel>
                                        <p:outputLabel value="#{flightSched.leg.departAirport.iataCode}" />
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column>
                                        <p:outputLabel value="#{flightSched.departDate}">
                                            <f:convertDateTime pattern="HH:mm" />
                                        </p:outputLabel>
                                        <p:outputLabel value="#{flightSched.leg.departAirport.iataCode}" />
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column>
                                        <p:outputLabel value="#{flightSched.leg.departAirport.city.cityName}, #{flightSched.leg.departAirport.airportName}" />
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column>
                                        <p:outputLabel value="#{flightSched.leg.departAirport.country.countryName}" />
                                    </p:column>
                                </p:row>

                            </p:panelGrid>
                        </p:column>
                        <p:column>
                            <p:panelGrid>
                                <p:row>
                                    <p:column>
                                        <p:outputLabel styleClass="fa fa-clock-o" style="font-size: 15px;" />                                        
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column>
                                        <p:outputLabel value="#{bookingManager.getFlightSchedTotalDur(flightSched)}"/>                                        
                                    </p:column>
                                </p:row>
                            </p:panelGrid>
                        </p:column>
                        <p:column>
                            <pa:CCFlightSchedInfoPanel flightSched="#{flightSched}" airport="#{flightSched.leg.arrivalAirport}" />
                        </p:column>
                    </p:row>
                    <p:row>
                        <c:forEach items="#{bookingManager.getFlightSchedLowesetTixFams()}" var="tixFam">
                            <p:column colspan="1"><p:outputLabel value="" /></p:column>
                        </c:forEach>
                    </p:row>
                </c:forEach>
            </p:panelGrid>

        </h:form>
    </ui:define>

</ui:composition>
