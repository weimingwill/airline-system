<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../../../../../template/CrmExTemplate.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="title">
        Main Page
    </ui:define>

    <ui:define name="content">
        <p:tabView>
            <p:tab title="Account Summary"> 
                <h:form id="accountSummary" style="width: 500px;text-align: center;" >
                    <p:panel header="Account Summary" styleClass="centeredPanel">
                        <p:panelGrid columns="2" styleClass="centered">
                            <p:outputLabel value="Customer Name: "/>
                            <p:outputLabel class="userProfileInput"  value="#{customerController.title}. #{customerController.firstname} #{customerController.lastname}"/>

                            <p:outputLabel value="Current Login Email: "/>
                            <p:outputLabel class="userProfileInput"  value="#{customerController.email}"/>

                            <p:outputLabel value="Accumulated Miles: "/>
                            <p:outputLabel class="userProfileInput"  value="#{customerController.accMiles}">
                                <f:convertNumber maxFractionDigits="2" minFractionDigits="2"/>
                            </p:outputLabel>

                            <p:outputLabel value="Membership Level "/>
                            <p:outputLabel class="userProfileInput"  value="#{customerController.membership.name}"/>
                        </p:panelGrid>
                    </p:panel>

                    <p:dataTable value="#{viewBookingBacking.currentBookingByEmail}" styleClass="centeredPanel" var="booking" tableStyleClass="table-small-font" >
                        <f:facet name="header">
                            My Current Booking
                        </f:facet>
                        <p:column headerText="Created Time">
                            <p:outputLabel value="#{booking.createdTime}">
                                <f:convertDateTime  timeZone="GMT+8" pattern="yyyy.MM.dd 'at' HH:mm" />
                            </p:outputLabel>
                        </p:column>

                        <p:column headerText="ETicket No.">
                            <p:outputLabel value="#{booking.eTicketNo}" />
                        </p:column>

                        <p:column headerText="Reference No.">
                            <p:outputLabel value="#{booking.referenceNo}" />
                        </p:column>

                        <p:column headerText="Price">
                            <p:outputLabel value="#{booking.price}">
                                <f:convertNumber maxFractionDigits="2" minFractionDigits="2"/>
                            </p:outputLabel>
                        </p:column>

                        <p:column headerText="Paid" style="width:30px;text-align: center">
                            <p:outputLabel  value="Yes" rendered="#{booking.paid}" />
                            <p:outputLabel  value="Not Paid" rendered="#{not booking.paid}" />

                        </p:column>

                        <p:column headerText="View" style="width:30px;text-align: center">
                            <p:commandButton  action="#{manageBookingManager.searchForThisBooking()}" icon="ui-icon-search">
                                <f:setPropertyActionListener value="#{booking}" target="#{manageBookingManager.selectThisBooking}" />
                           </p:commandButton>
                        </p:column>
                    </p:dataTable>


                    <p:panel header="Feedbacks" styleClass="centeredPanel">
                        <!--                        <h:form>-->
                        <p:dataTable value="#{customerController.feedbacks}" var="feedback" style="margin-bottom:40px" rows="5" tableStyleClass="table-small-font">
                            <!--                                         paginator="true"
                                                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                                     rowsPerPageTemplate="5,10,15">-->

                            <p:column headerText="Feedback Subject">
                                <p:outputLabel value="#{feedback.subject}"/>
                            </p:column>

                            <p:column headerText="Created Time">
                                <p:outputLabel value="#{feedback.createdTime}">
                                    <f:convertDateTime  timeZone="GMT+8" pattern="yyyy.MM.dd 'at' HH:mm" />
                                </p:outputLabel>
                            </p:column>

                            <p:column headerText="View" style="width:32px;text-align: center">
                                <p:commandButton  oncomplete="PF('feedbackDialog').show()" icon="ui-icon-search" update="feedbackDialog">
                                    <f:setPropertyActionListener value="#{feedback}" target="#{feedbackBacking.selectFeedback}" />
                                </p:commandButton>
                            </p:column>


                        </p:dataTable> 

                        <!--                        </h:form>-->
                    </p:panel>

                </h:form>


            </p:tab>
            <p:tab title="My Profile">
                <h:form id="RegistrationForm" style="width: 500px;text-align: center;" >
                    <p:panel header="Customer Registation Form" styleClass="centeredPanel">

                        <p:panel header="Personal information">
                            <p:panelGrid columns="2" styleClass="centered">
                                <p:outputLabel value="Title"/>
                                <p:outputLabel value="#{customerController.title}"/>

                                <p:outputLabel for="firstname" value="First/Given Name" />
                                <p:outputLabel id="firstname" class="userProfileInput"  value="#{customerController.firstname}" />

                                <p:outputLabel for="lastname" value="Last/Family Name"/>
                                <p:outputLabel id="lastname" class="userProfileInput" value="#{customerController.lastname}"/>           

                                <p:outputLabel for="passportNo" value="Passport No" />
                                <p:inputText id="passportNo" class="userProfileInput"  value="#{customerController.passportNo}"  placeholder="passport"/>

                                <p:outputLabel for="gender" value="Gender"/>
                                <p:outputLabel id="gender" value="#{customerController.gender}"/>

                                <p:outputLabel for="dob" value="Date of Birth"/>
                                <p:outputLabel  id="dob" value="#{customerController.dob}">
                                    <f:convertDateTime timeZone="GMT+8" pattern="yyyy-MMM-dd" />
                                </p:outputLabel>

                                <p:outputLabel for="passportIssueDate" value="Passport Issue Date"/>
                                <p:calendar id="passportIssueDate" value="#{customerController.passportIssueDate}"  navigator="true" pattern="yyyy-MMM-dd" yearRange="c-50:c" maxdate="c" placeholder="Issue Date"/>

                                <p:outputLabel for="passportExpireDate" value="Passport Expire Date"/>
                                <p:calendar id="passportExpireDate" value="#{customerController.passportExpDate}"  navigator="true" pattern="yyyy-MMM-dd" yearRange="c-50:c+50" placeholder="Expire Date"/>
                                <p:outputLabel for="nationality" value="Nationality"/>
                                <p:selectOneMenu style="width:180px" id="nationality" required="true" requiredMessage="Please enter your Nationality" value="#{customerController.nationality}">
                                    <f:selectItem itemLabel="Select Country" itemValue="" />
                                    <f:selectItems value="#{routeController.countries}" var="country" itemLabel="#{country.countryName}" itemValue="#{country.countryName}" />
                                </p:selectOneMenu>

                            </p:panelGrid>

                        </p:panel>
                        <p:panel header="Contact Information">
                            <p:panelGrid columns="2" styleClass="centered">
                                <p:outputLabel for="email" value="Email"/>
                                <p:inputText id="email" class="userProfileInput" required="true" requiredMessage="Please enter email" validatorMessage="Invalid email format" value="#{customerController.email}">
                                    <p:ajax update="messages" event="blur" />
                                    <f:validateRegex
                                        pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
                                </p:inputText>

                                <p:outputLabel for="membershipId" value="Membership ID"/>
                                <p:outputLabel id="membershipId" value="#{customerController.membershipId}"/>

                                <h:outputLabel class="userProfileInput" for="address1" value="Address1" />
                                <p:inputText id="address1" class="userProfileInput"  required="true" requiredMessage="Please enter address" value="#{customerController.addr1}" placeholder="block, street"/>

                                <h:outputLabel for="address2" value="Address2"/>
                                <p:inputText id="address2" class="userProfileInput" required="true" requiredMessage="Please enter address" value="#{customerController.addr2}" placeholder="street"/>

                                <h:outputLabel for="city" value="City"/>
                                <p:inputText id="city" class="userProfileInput" required="true" requiredMessage="Please enter city name" value="#{customerController.city}" placeholder="city"/>

                                <h:outputLabel for="state" value="State"/>
                                <p:inputText id="state" class="userProfileInput" required="true" requiredMessage="Please enter state" value="#{customerController.state}" placeholder="state"/>

                                <h:outputLabel for="country" value="Country"/>
                                <p:inputText id="country" class="userProfileInput" required="true" requiredMessage="Please enter Country" value="#{customerController.country}" placeholder="country"/>


                                <p:outputLabel for="zipcode" value="Postal Code"/>
                                <p:inputText id="zipcode" class="userProfileInput" required="true" requiredMessage="Please enter postal code" value="#{customerController.zipCode}" placeholder="postal code"/>
                            </p:panelGrid>
                            <p:panelGrid>
                                <p:row>
                                    <p:column>
                                        <h:outputLabel  value="Phone"/>
                                    </p:column>
                                    <p:column>
                                        <p:selectOneMenu class="userProfileInput"   required="true" style="width:120px" requiredMessage="Please select phone dial Code" value ="#{customerController.phone.countryCode}">
                                            <f:selectItem itemLabel="Country Code" itemValue="" />
                                            <f:selectItems value="#{routeController.countries}" var="country" itemLabel="#{country.countryName}(#{country.dialingCode})" itemValue="#{country.dialingCode}" />
                                        </p:selectOneMenu>

                                    </p:column>
                                    <p:column>
                                        <p:inputText style="width:50px" class="userProfileInput"  value="#{customerController.phone.areaCode}"  placeholder="#area"/> 
                                    </p:column>
                                    <p:column>
                                        <p:inputText style="width:100px" class="userProfileInput" required="true" value="#{customerController.phone.number}" requiredMessage="Please Input phone number" /> 
                                    </p:column>
                                </p:row>

                            </p:panelGrid>
                        </p:panel>

                        <p:panel header="Login Detail">
                            <p:panelGrid columns="2" styleClass="centered">
                                <p:outputLabel for="secQue" value="Secutity Question"/>
                                <p:selectOneMenu style="width:180px" id="secQue" required="true" requiredMessage="Please choose your security question" value="#{customerController.securQest}">
                                    <f:selectItem itemLabel="Select Question" itemValue="" />
                                    <f:selectItem itemLabel="Please Choose" itemValue="" />
                                    <f:selectItem itemLabel="What is your primary school?"  itemValue="What is your primary school" />
                                    <f:selectItem itemLabel="What is your mom's first name" itemValue="What is your mom's first name"/>
                                    <f:selectItem itemLabel="What is your pet’s name?"  itemValue="What is your pet’s name?" />
                                    <f:selectItem itemLabel="In what year was your father born?"  itemValue="In what year was your father born?" />
                                    <f:selectItem itemLabel="What is your favorite movie?"  itemValue="What is your favorite movie?" />
                                    <f:selectItem itemLabel="What is the name of the place your wedding reception was held?" itemValue="What is the name of the place your wedding reception was held?" />
                                    <f:selectItem itemLabel="In what city or town does your nearest sibling live?"  itemValue="In what city or town does your nearest sibling live?"/>
                                </p:selectOneMenu>
                                <p:outputLabel for="secAns" value="Secutity Answer"/>
                                <p:inputText id="secAns" class="userProfileInput" required="true" requiredMessage="Please answer security question" value="#{customerController.securAns}" placeholder="security answer"/>
                            </p:panelGrid>


                        </p:panel>

                        <p:panel header="Preference Selection">
                            <p:panelGrid columns="2" styleClass="centered">
                                <p:outputLabel for="newsLetterPref" value="Do you want to receive our news letter"/>
                                <p:selectOneRadio id="newsLetterPref" value="#{customerController.newsLetterPref}" required="true" requiredMessage="Please Select your news letter preference" binding="#{newsLetterPref}">
                                    <f:selectItem itemLabel="Yes" itemValue="TRUE" />
                                    <f:selectItem itemLabel="No" itemValue="FALSE" />
                                </p:selectOneRadio>
                                <p:outputLabel for="promoPref" value="Do you want to receive our promotion news "/>
                                <p:selectOneRadio id="promoPref" value="#{customerController.promoPref}" required="true" requiredMessage="Please Select your promotion preference" binding="#{promoPref}">
                                    <f:selectItem itemLabel="Yes" itemValue="TRUE" />
                                    <f:selectItem itemLabel="No" itemValue="FALSE" />
                                </p:selectOneRadio>
                            </p:panelGrid>

                        </p:panel>

                        <p:commandButton action="#{customerController.updateProfile()}" value="Save" update="messages"/>
                    </p:panel>

                </h:form>
            </p:tab>
            <p:tab title="My Miles">
                <h:form id="form" style="width: 500px;text-align: center;" >
                    <p:panel header="My Information" styleClass="centeredPanel" >
                        <p:panelGrid columns="2" styleClass="centered">
                            <p:outputLabel value="Customer Name: "/>
                            <p:outputLabel class="userProfileInput"  value="#{customerController.title}. #{customerController.firstname} #{customerController.lastname}"/>

                            <p:outputLabel value="Current Login Email: "/>
                            <p:outputLabel class="userProfileInput"  value="#{customerController.email}"/>

                            <p:outputLabel value="Accumulated Miles: "/>
                            <p:outputLabel class="userProfileInput"  value="#{customerController.accMiles}">
                                <f:convertNumber maxFractionDigits="2" minFractionDigits="2"/>
                            </p:outputLabel>

                            <p:outputLabel value="Membership Level "/>
                            <p:outputLabel class="userProfileInput"  value="#{customerController.membership.name}"/>
                        </p:panelGrid>

                    </p:panel>
                </h:form>
                <h:form id="redeemform" style="width: 500px;text-align: center;" >
                    <p:panel header="Redeem Section" styleClass="centeredPanel">
                        <p:panelGrid style="width: 400px;">

                            <!--Departure Airport-->
                            <p:row> 
                                <p:column colspan="1"><p:outputLabel for="deptLoc" value="From"/></p:column>
                                <p:column colspan="5">
                                    <p:autoComplete id="deptLoc" converter="airportConverter" forceSelection="true" required="true" styleClass="bookingAirport"
                                                    value="#{milesRedemptionBacking.deptAirport}" completeMethod="#{milesRedemptionBacking.completeDeptAirport}"
                                                    var="airport" itemLabel="#{airport.airportName}" itemValue="#{airport}" >
                                        <p:column>
                                            <p:outputLabel value="#{airport.city.cityName}" />
                                        </p:column>

                                        <p:column>
                                            <p:outputLabel value="#{airport.airportName}" />
                                        </p:column>

                                        <p:column>
                                            <p:outputLabel value="#{airport.iataCode}" />
                                        </p:column>

                                        <p:column>
                                            <p:outputLabel value="#{airport.country.countryName}" />
                                        </p:column>
                                    </p:autoComplete>
                                </p:column>
                            </p:row>

                            <p:row>  
                                <p:column colspan="1"><p:outputLabel for="arriveLoc" value="To"/></p:column>
                                <p:column colspan="5">
                                    <p:autoComplete id="arriveLoc" converter="airportConverter" forceSelection="true" required="true" styleClass="bookingAirport"
                                                    value="#{milesRedemptionBacking.arrAirport}" completeMethod="#{milesRedemptionBacking.completeArrAirport}"
                                                    var="airport" itemLabel="#{airport.airportName}" itemValue="#{airport}" >
                                        <p:column>
                                            <p:outputLabel value="#{airport.city.cityName}" />
                                        </p:column>

                                        <p:column>
                                            <p:outputLabel value="#{airport.airportName}" />
                                        </p:column>

                                        <p:column>
                                            <p:outputLabel value="#{airport.iataCode}" />
                                        </p:column>

                                        <p:column>
                                            <p:outputLabel value="#{airport.country.countryName}" />
                                        </p:column>
                                    </p:autoComplete>
                                </p:column>
                            </p:row>

                            <p:row>
                                <p:column ><p:outputLabel value="Cabin Class: "/></p:column>
                                <p:column colspan="5">
                                    <p:selectOneMenu  value="#{milesRedemptionBacking.selectedCabinCls}" converter="cabinClassConverter" style="width:200px">
                                        <f:selectItems value="#{milesRedemptionBacking.cabinClses}" var="cabinCls" itemLabel="#{cabinCls.name}" itemValue="#{cabinCls}" />
                                    </p:selectOneMenu>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column colspan="2" headerText="Calculate" style="width:45px;text-align: center">
                                    <p:commandButton value="Calculate" update="redeemDialog" actionListener="#{milesRedemptionBacking.mileCalculation()}" oncomplete="PF('redeemDialog').show()" icon="ui-icon-calculator"/>
                                    <!--                                        <f:setPropertyActionListener value="{mileredeem}" target="{redeemMilesController.selectedMilesRedemption}" />-->

                                </p:column>
                            </p:row>
                        </p:panelGrid>
                    </p:panel>
                </h:form>
                <h:form id="Claimform" style="width: 500px;text-align: center;" >
                    <p:panel header="Claim Section" styleClass="centeredPanel" >
                        <p:panelGrid columns="2" style="width: 400px;" >
                            <p:outputLabel for="bookingRefenceNo" value="Booking Reference No."/>
                            <p:inputText id="bookingRefenceNo" class="userProfileInput"  value="#{viewBookingBacking.bookingReferenceNo}"  placeholder="Refence No."/>

                        </p:panelGrid>
                        <p:column headerText="Check" style="width:45px;text-align: center">
                            <p:commandButton value="Check" update="claimDialog,messages" actionListener="#{viewBookingBacking.checkBookingReference()}" oncomplete="PF('claimDialog').show()" icon="ui-icon-calculator"/>
                        </p:column>
                    </p:panel>
                </h:form>
                <h:form id="Upgradeform" style="width: 500px;text-align: center;" >
                    <p:panel header="Upgrade Section" styleClass="centeredPanel">
                        <p:panelGrid columns="3" style="width: 450px;" >
                            <p:outputLabel for="membershipStandard1" value="Upgrade to Elite Silver"/>
                            <p:outputLabel id="membershipStandard1" class="userProfileInput"  value="S$ 8,000 / Year" />

                            <p:column headerText="Upgrade" style="width:45px;text-align: center">
                                <p:commandButton value="Upgrade" update="upgradeSilverDialog"  oncomplete="PF('upgradeSilverDialog').show()" icon="ui-icon-arrow-1-n"/>
                            </p:column>

                            <p:outputLabel for="membershipStandard2" value="Upgrade to Elite Gold"/>
                            <p:outputLabel id="membershipStandard2" class="userProfileInput"  value="S$ 20,000 / Year" />
                            <p:column headerText="Upgrade" style="width:45px;text-align: center">
                                <p:commandButton value="Upgrade" update="upgradeGoldDialog"  oncomplete="PF('upgradeGoldDialog').show()" icon="ui-icon-arrow-1-n"/>
                            </p:column>

                        </p:panelGrid>

                    </p:panel>
                </h:form>

            </p:tab>

            <p:tab title="My Bookings">

                <h:form id="bookingform" style="width: 500px;text-align: center;" >
                    <p:panel header="My Information" styleClass="centeredPanel" >
                        <p:panelGrid columns="2" styleClass="centered">
                            <p:outputLabel value="Customer Name: "/>
                            <p:outputLabel class="userProfileInput"  value="#{customerController.title}. #{customerController.firstname} #{customerController.lastname}"/>

                            <p:outputLabel value="Current Login Email: "/>
                            <p:outputLabel class="userProfileInput"  value="#{customerController.email}"/>

                            <p:outputLabel value="Accumulated Miles: "/>
                            <p:outputLabel class="userProfileInput"  value="#{customerController.accMiles}">
                                <f:convertNumber maxFractionDigits="2" minFractionDigits="2"/>
                            </p:outputLabel>

                            <p:outputLabel value="Membership Level "/>
                            <p:outputLabel class="userProfileInput"  value="#{customerController.membership.name}"/>


                        </p:panelGrid>

                    </p:panel>

                    <p:dataTable value="#{viewBookingBacking.bookingByEmail}" styleClass="centeredPanel" var="booking" tableStyleClass="table-small-font" >
                        <f:facet name="header">
                            My Booking History
                        </f:facet>
                        <p:column headerText="Created Time">
                            <p:outputLabel value="#{booking.createdTime}">
                                <f:convertDateTime  timeZone="GMT+8" pattern="yyyy.MM.dd 'at' HH:mm" />
                            </p:outputLabel>
                        </p:column>

                        <p:column headerText="ETicket No.">
                            <p:outputLabel value="#{booking.eTicketNo}" />
                        </p:column>

                        <p:column headerText="Reference No.">
                            <p:outputLabel value="#{booking.referenceNo}" />
                        </p:column>

                        <p:column headerText="Price">
                            <p:outputLabel value="#{booking.price}">
                                <f:convertNumber maxFractionDigits="2" minFractionDigits="2"/>
                            </p:outputLabel>
                        </p:column>

                        <p:column headerText="Paid" style="width:30px;text-align: center">
                            <p:outputLabel  value="Yes" rendered="#{booking.paid}" />
                            <p:outputLabel  value="Not Paid" rendered="#{not booking.paid}" />

                        </p:column>

                        <p:column headerText="View" style="width:30px;text-align: center">
                            <p:commandButton  action="#{manageBookingManager.searchForThisBooking()}" icon="ui-icon-search">
                                <f:setPropertyActionListener value="#{booking}" target="#{manageBookingManager.selectThisBooking}" />
                           </p:commandButton>
                        </p:column>
                    </p:dataTable>
                </h:form>
            </p:tab>

            <p:tab title="Book a flight">

            </p:tab>
            <p:tab title="Online Check-in">

            </p:tab>

            <p:tab title="Raise Feedback">
                <h:form id="feedbackForm" style="width: 500px;text-align: center;" >
                    <p:panel header="Customer Feedback Form" styleClass="centeredPanel">

                        <p:panel header="Personal information">
                            <p:panelGrid columns="2" styleClass="centered">


                                <p:outputLabel for="firstname" value="First/Given Name" />
                                <p:outputLabel id="firstname" class="userProfileInput"  value="#{feedbackController.regCust.firstName}"/>

                                <p:outputLabel for="lastname" value="Last/Family Name"/>
                                <p:outputLabel id="lastname" class="userProfileInput"  value="#{feedbackController.regCust.lastName}"/>           

                                <p:outputLabel for="email" value="Email"/>
                                <p:outputLabel id="email" class="userProfileInput"  value="#{feedbackController.regCust.email}"/> 


                            </p:panelGrid>

                        </p:panel>
                        <p:panel header="Feedback Session" >
                            <p:panelGrid columns="2" styleClass="centered">
                                <p:outputLabel for="subject" value="Feedback Subject"/>
                                <p:inputText id="subject" class="userProfileInput"  value="#{feedbackController.newFeedback.subject}"/>
                            </p:panelGrid>
                            <h:form>           
                                <p:editor id="editor" widgetVar="editorWidget" value="#{feedbackController.newFeedback.content}" width="440" />

                                <h:panelGrid columns="2" style="margin-top: 10px">
                                    <p:commandButton value="Submit"  action="#{feedbackController.createrFeedback()}" update="messages" icon="ui-icon-disk" />

                                    <p:commandButton value="Clear" type="button" onclick="PF('editorWidget').clear();" icon="ui-icon-close" />
                                </h:panelGrid>


                            </h:form> 
                        </p:panel>
                    </p:panel>
                </h:form>
            </p:tab>
            <!--            <p:tab title="Claim Miles">-->
            <h:form id="claimMilesForm" style="width: 500px;text-align: center;" >     
                <p:panel header="My Information" styleClass="centeredPanel" >
                    <p:panelGrid columns="2" styleClass="centered">
                        <p:outputLabel value="Customer Name: "/>
                        <p:outputLabel class="userProfileInput"  value="#{customerController.title}. #{customerController.firstname} #{customerController.lastname}"/>

                        <p:outputLabel value="Current Login Email: "/>
                        <p:outputLabel class="userProfileInput"  value="#{customerController.email}"/>

                        <p:outputLabel value="Accumulated Miles: "/>
                        <p:outputLabel class="userProfileInput"  value="#{customerController.accMiles}">
                            <f:convertNumber maxFractionDigits="2" minFractionDigits="2"/>
                        </p:outputLabel>

                        <p:outputLabel value="Membership Level "/>
                        <p:outputLabel class="userProfileInput"  value="#{customerController.membership.name}"/>
                    </p:panelGrid>
                </p:panel>

                <p:panel header="Claim Section" styleClass="centeredPanel">
                    <p:panelGrid columns="2" >
                        <p:outputLabel for="bookingRefenceNo" value="Booking Reference No."/>
                        <p:inputText id="bookingRefenceNo" class="userProfileInput"  value="#{viewBookingBacking.bookingReferenceNo}"  placeholder="Refence No."/>

                    </p:panelGrid>
                    <p:column headerText="Check" style="width:45px;text-align: center">
                        <p:commandButton value="Check" update="claimDialog,messages" actionListener="#{viewBookingBacking.checkBookingReference()}" oncomplete="PF('claimDialog').show()" icon="ui-icon-calculator"/>
                    </p:column>
                </p:panel>
            </h:form> 
            <!--            </p:tab>-->
        </p:tabView>

        <p:dialog id="claimDialog" header="Claim Booking:  #{viewBookingBacking.bookingReferenceNo}"  widgetVar="claimDialog" modal="true" appendTo="@(body)" showEffect="fade" hideEffect="fade" resizable="false">

            <h:form>
                <p:panel id="claimDetail">
                    <p:panelGrid>

                        <p:row> 
                            <p:column>
                                <p:outputLabel value="Booking Created Time: " />
                            </p:column>
                            <p:column>
                                <p:outputLabel value="#{viewBookingBacking.selectedBooking.createdTime}" >
                                    <f:convertDateTime  timeZone="GMT+8" pattern="yyyy.MM.dd 'at' HH:mm" />
                                </p:outputLabel>
                            </p:column>
                        </p:row>
                        <p:row> 
                            <p:column>
                                <p:outputLabel value="Booking Reference No. " />
                            </p:column>
                            <p:column>
                                <p:outputLabel value="#{viewBookingBacking.selectedBooking.referenceNo}" >
                                </p:outputLabel>
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column>
                                <p:outputLabel value="Booking Price " />
                            </p:column>
                            <p:column>
                                <p:outputLabel value="#{viewBookingBacking.selectedBooking.price}" >
                                    <f:convertNumber maxFractionDigits="2" minFractionDigits="2"/>
                                </p:outputLabel>
                            </p:column>
                        </p:row>

                        <p:row>
                            <p:column>
                                <p:outputLabel value="Flying Distance: " />
                            </p:column>
                            <p:column>
                                <p:outputLabel value="#{viewBookingBacking.actualDistance}" >
                                    <f:convertNumber maxFractionDigits="2" minFractionDigits="2"/>
                                </p:outputLabel>
                            </p:column>
                        </p:row>

                        <p:row>
                            <p:column>
                                <p:outputLabel value="Claim Points " />
                            </p:column>
                            <p:column>
                                <h:outputLabel value="#{viewBookingBacking.actualPointClaim}" >
                                    <f:convertNumber maxFractionDigits="2" minFractionDigits="2"/>
                                </h:outputLabel>
                            </p:column>
                        </p:row>
                        <!--</ui:repeat>-->
                    </p:panelGrid>
                </p:panel>
                <p:commandButton value="Claim" style="width: 200px;text-align: center;"  action="#{navigationController.redirectToCurrentPage()}" actionListener="#{viewBookingBacking.claimMiles()}" oncomplete="PF('claimDialog').hide()" update="messages"/>

            </h:form>
        </p:dialog>
        <p:dialog id="feedbackDialog" header="View Feedback:  #{feedbackBacking.selectFeedback.subject}"  widgetVar="feedbackDialog" modal="true" appendTo="@(body)" showEffect="fade" hideEffect="fade" resizable="false">

            <h:form>
                <p:panel id="feedbackDetail">
                    <p:panelGrid>

                        <p:row> 
                            <p:column>
                                <p:outputLabel value="Feedback Subject: " />
                            </p:column>
                            <p:column>
                                <p:outputLabel value="#{feedbackBacking.selectFeedback.subject}" >
                                </p:outputLabel>
                            </p:column>
                        </p:row>
                        <p:row> 
                            <p:column>
                                <p:outputLabel value="Feedback Status: " />
                            </p:column>
                            <p:column>
                                <p:outputLabel value="#{feedbackBacking.selectFeedback.status}" >
                                </p:outputLabel>
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column>
                                <p:outputLabel value="Feedback Content: " />
                            </p:column>
                            <p:column>
                                <h:outputText escape="false" value="#{feedbackBacking.selectFeedback.content}" />
                            </p:column>
                        </p:row>

                        <!--</ui:repeat>-->
                    </p:panelGrid>
                </p:panel>

            </h:form>
        </p:dialog>

        <p:dialog id="redeemDialog"  header="The total points you need for this selection is" widgetVar="redeemDialog" modal="true" appendTo="@(body)" showEffect="fade" hideEffect="fade" resizable="false">
            <h:form>
                <p:panel id="redemptionDetail">

                    <p:panelGrid>
                        <!--<ui:repeat var="cc" value="{cabinClassController.selectedCabinClass}" >-->
                        <p:row> 
                            <p:column>
                                <p:outputLabel value="Actual Miles (in miles) " />
                            </p:column>

                            <p:column>
                                <h:outputLabel value="#{milesRedemptionBacking.calculatedMiles}" >
                                    <f:convertNumber maxFractionDigits="2" minFractionDigits="2"/>
                                </h:outputLabel>
                            </p:column>
                        </p:row>

                        <p:row>  
                            <p:column>
                                <p:outputLabel value="Miles Needed for Redemption (in miles) " />
                            </p:column>

                            <p:column>
                                <h:outputLabel value="#{milesRedemptionBacking.actualPointNeed}" >
                                    <f:convertNumber maxFractionDigits="2" minFractionDigits="2"/>
                                </h:outputLabel>
                            </p:column>
                        </p:row>

                        <!--</ui:repeat>-->
                    </p:panelGrid>
                </p:panel>
                <p:commandButton value="Redeem" style="width: 200px;text-align: center;"  action="#{navigationController.redirectToCurrentPage()}" actionListener="#{milesRedemptionBacking.mileRedemption()}" oncomplete="PF('redeemDialog').hide()" update="messages"/>

            </h:form>
        </p:dialog>

        <p:dialog id="upgradeSilverDialog"  header="The following action allows you to become Elite Silver Member" widgetVar="upgradeSilverDialog" modal="true" appendTo="@(body)" showEffect="fade" hideEffect="fade" resizable="false">
            <h:form>
                <p:panel id="upgradeSilverDetail">

                    <p:panelGrid>
                        <p:row> 
                            <p:column>
                                <p:outputLabel value="Membership Class:" />
                            </p:column>

                            <p:column>
                                <p:outputLabel value="Elite Silver" />
                            </p:column>
                        </p:row>

                        <p:row>  
                            <p:column>
                                <p:outputLabel value="Annual Fee: " />
                            </p:column>

                            <p:column>
                                <p:outputLabel value="S$ 8000 / Year" />
                            </p:column>
                        </p:row>

                    </p:panelGrid>
                </p:panel>
                <p:commandButton value="Payment" style="width: 200px;text-align: center;"  action="#{navigationController.redirectToCurrentPage()}" actionListener="#{customerController.updateSilverMembership()}" oncomplete="PF('upgradeSilverDialog').hide()" update="messages"/>

            </h:form>
        </p:dialog>

        <p:dialog id="upgradeGoldDialog"  header="The following action allows you to become Elite Gold Member" widgetVar="upgradeGoldDialog" modal="true" appendTo="@(body)" showEffect="fade" hideEffect="fade" resizable="false">
            <h:form>
                <p:panel id="upgradeGoldDetail">

                    <p:panelGrid>
                        <p:row> 
                            <p:column>
                                <p:outputLabel value="Membership Class:" />
                            </p:column>

                            <p:column>
                                <p:outputLabel value="Elite Gold" />
                            </p:column>
                        </p:row>

                        <p:row>  
                            <p:column>
                                <p:outputLabel value="Annual Fee: " />
                            </p:column>

                            <p:column>
                                <p:outputLabel value="S$ 20,000 / Year" />
                            </p:column>
                        </p:row>
                    </p:panelGrid>
                </p:panel>
                <p:commandButton value="Payment" style="width: 200px;text-align: center;"  action="#{navigationController.redirectToCurrentPage()}" actionListener="#{customerController.updateGoldMembership()}" oncomplete="PF('upgradeGoldDialog').hide()" update="messages"/>

            </h:form>
        </p:dialog>
    </ui:define>

</ui:composition>
